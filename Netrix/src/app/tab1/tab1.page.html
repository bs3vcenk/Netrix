<ion-header>
  <ion-toolbar>
    <ion-title>
      {{ 'tab1.title' | translate }}
    </ion-title>
    <ion-buttons slot="primary">
      <ion-button routerLink="/settings" routerDirection="forward">
        <ion-icon slot="icon-only" name="settings"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-buttons slot="secondary">
      <ion-button routerLink="/classes" routerDirection="forward">
        {{ 'tab1.text.classes' | translate }}
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-item id="wrapper">
    <!-- Justified absences -->
    <div id="flexItem">
      <ion-text id="descText">
        {{ 'tab1.text.average' | translate }}
      </ion-text><br/>
      <ion-label id="infoText">
        {{ fullAvg }}
      </ion-label>
    </div>
    <!-- Absences on wait, with *ngIf to show only if the user has
         waiting absences -->
    <div id="flexItem" *ngIf="currentTestsLen > 0">
      <ion-text id="descText">
        {{ 'tab1.text.tests_remaining' | translate }}
      </ion-text><br/>
      <ion-label id="infoText">
        {{ remainingTests }}
      </ion-label>
    </div>
  </ion-item>
  <!-- "Your average is:" text at the top
       Shows only when we have the complete average  -->
  <!--<ion-item [@fadeInOut] *ngIf="fullAvg >= 0 && fullAvg !== null">
    <ion-text id="preWholeAvgText" position="stacked">
      {{ 'tab1.text.average' | translate }}
    </ion-text>
    <ion-label id="wholeAvgText" position="stacked" *ngIf="fullAvg !== 0">
      {{ fullAvg }}
    </ion-label>
    <ion-label id="wholeAvgText" position="stacked" *ngIf="fullAvg === 0">
      {{ 'tab1.text.no_grades' | translate }}
    </ion-label>
  </ion-item>-->
  <!-- "Your average is:" skeleton object -->
  <!--<ion-item *ngIf="fullAvg === null">
    <ion-text id="preWholeAvgText" position="stacked" style="width: 30%">
      <ion-skeleton-text animated style="width: 100%;line-height: 12px"></ion-skeleton-text>
    </ion-text>
    <ion-label id="wholeAvgText" position="stacked" style="width: 20%">
      <ion-skeleton-text animated style="width: 100%;line-height: 38px"></ion-skeleton-text>
    </ion-label>
  </ion-item>-->

  <!-- List of subjects -->
  <ion-list lines="full" *ngIf="subjects">
    <!-- <ion-item> for every subject, sets routerLink to subjectOverview for
         that subject's ID -->
    <ion-item [@fadeInOut] button *ngFor="let subject of subjects" routerLink="/subj-overview/{{subject.id}}" routerDirection="forward">
      <ion-label>
        <div id="title" stacked>
          <!-- Subject name -->
          <h3 class="ion-text-wrap">{{subject.subject}}</h3>
          <!-- Processed list of professors -->
          <ion-note class="ion-text-wrap">{{subject.professors}}</ion-note>
        </div>
      </ion-label>
      <!-- The average grade for this subject (shown to the right) -->
      <ion-text id="average" class="ion-text-right">
        {{subject.average}}
      </ion-text>
    </ion-item>
  </ion-list>

  <!-- Temporary/skeleton list of subjects, shown while loading -->
  <ion-list lines="full" *ngIf="!subjects">
    <!-- Empty <ion-item> -->
    <ion-item button *ngFor="let tempSubject of tempSubjects" id="tempSubject">
      <ion-label>
        <div id="title" stacked>
          <h3><ion-skeleton-text animated style="width: 50%;line-height: 20px"></ion-skeleton-text></h3>
          <ion-note class="ion-text-wrap"><ion-skeleton-text animated style="width: 80%;line-height: 15px"></ion-skeleton-text></ion-note>
        </div>
      </ion-label>
      <ion-text id="average" class="ion-text-right" style="width: 7%">
        <ion-skeleton-text animated style="width: 100%;line-height: 29px"></ion-skeleton-text>
      </ion-text>
    </ion-item>
  </ion-list>
</ion-content>
